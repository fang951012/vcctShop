webpackJsonp([3],{StGW:function(t,e){},gBeV:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("ergL"),a=s("Au9i"),n={name:"history",components:{common:i.a},data:function(){return{title:"兑换记录",aList:[],nPage:1,isAll:!1,csrf:"",statusText:"点击加载更多",isApp:!1}},created:function(){var t=this;t.getList(t.nPage),t.judgeApp()},methods:{judgeApp:function(){var t=navigator.userAgent,e=-1!=t.indexOf("iPhone");if(-1!=t.indexOf("damailicai_app"))if(this.isApp=!0,e){try{JIClient.appSetHead({showBack:!0,title:"兑换记录"})}catch(t){}}else try{JIClient.appSetHead(!0,"兑换记录","")}catch(t){}else this.isApp=!1},getMore:function(){this.getList(this.nPage)},getCsrf:function(){this.csrf=document.getElementsByName("csrf-token")[0].content},getList:function(t){var e=this;if("没有更多了哦"==e.statusText)return!1;a.Indicator.open({text:"Loading...",spinnerType:"fading-circle"}),e.getCsrf(),e.statusText="加载中";var s=new FormData;s.append("page",t),e.$http.post("/shop/exchange-list",s,{headers:{"X-CSRF-Token":e.csrf,"Content-Type":"multipart/form-data"}}).then(function(s){if(0!=(s=s.data).statusCode)Object(a.MessageBox)({title:"温馨提示",message:s.message});else{for(var i=0;i<s.content.list.length;i++)e.aList.push(s.content.list[i]);s.content.total<=10*t?e.statusText="没有更多了哦":(e.statusText="点击加载更多",e.nPage++)}a.Indicator.close()}).catch(function(t){Object(a.MessageBox)({title:"温馨提示",message:"系统繁忙，请稍后再试！"})})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"history"}},[s("div",{staticClass:"cont"},[t.isApp?t._e():s("common",{attrs:{title:t.title}}),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"list"},[s("ul",{staticClass:"detail"},t._l(t.aList,function(e){return s("li",[s("a",{attrs:{href:"#/his-detail?id="+e.order_id}},[e.num>1?s("span",{staticClass:"tl"},[t._v(t._s(e.title)+"*"+t._s(e.num))]):t._e(),t._v(" "),1==e.num?s("span",{staticClass:"tl"},[t._v(t._s(e.title))]):t._e(),t._v(" "),s("span",{staticClass:"tc",domProps:{textContent:t._s("-"+e.buy_price)}}),t._v(" "),s("span",{staticClass:"tr"},[s("p",{domProps:{textContent:t._s(e.pay_time[0])}}),t._v(" "),s("p",{domProps:{textContent:t._s(e.pay_time[1])}})])])])})),t._v(" "),s("div",{staticClass:"load",domProps:{textContent:t._s(t.statusText)},on:{click:t.getMore}})])],1),t._v(" "),s("footer",[t._v("  \n    兑换最多保存50条记录\n  ")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"type"},[e("li",{staticClass:"tl"},[this._v("礼品名称")]),this._v(" "),e("li",{staticClass:"tc"},[this._v("消耗积分")]),this._v(" "),e("li",{staticClass:"tr"},[this._v("兑换时间")])])}]};var c=s("VU/8")(n,o,!1,function(t){s("StGW")},null,null);e.default=c.exports}});