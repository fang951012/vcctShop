webpackJsonp([4],{gBeV:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("ergL"),i=(e("Au9i"),{name:"history",components:{common:a.a},data:function(){return{title:"兑换记录",aList:[],nPage:1,isAll:!1,csrf:"",statusText:"点击加载更多",isApp:!1}},created:function(){var t=this;t.getList(t.nPage),t.judgeApp()},methods:{judgeApp:function(){var t=navigator.userAgent,s=-1!=t.indexOf("iPhone");if(-1!=t.indexOf("damailicai_app"))if(this.isApp=!0,s){try{JIClient.appSetHead({showBack:!0,title:"兑换记录"})}catch(t){}}else try{JIClient.appSetHead(!0,"兑换记录","")}catch(t){}else this.isApp=!1},getMore:function(){this.getList(this.nPage)},getCsrf:function(){this.csrf=document.getElementsByName("csrf-token")[0].content},getList:function(t){var s=this;if(s.getCsrf(),"暂无更多"==s.statusText)return!1;s.statusText="加载中";var e=new FormData;e.append("page",t),s.$http.post("/shop/exchange-list",e,{headers:{"X-CSRF-Token":s.csrf,"Content-Type":"multipart/form-data"}}).then(function(e){if(0!=(e=e.data).statusCode)MessageBox({message:e.message});else{for(var a=0;a<e.content.list.length;a++)s.aList.push(e.content.list[a]);if(e.content.total<=10*t)return s.statusText="暂无更多",!1;s.statusText="点击加载更多",s.nPage++}}).catch(function(t){})}}}),n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"history"}},[e("div",{staticClass:"cont"},[t.isApp?t._e():e("common",{attrs:{title:t.title}}),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"list"},[e("ul",{staticClass:"detail"},t._l(t.aList,function(s){return e("li",[e("a",{attrs:{href:"#/his-detail?id="+s.order_id}},[s.num>1?e("span",{staticClass:"tl"},[t._v(t._s(s.title)+"*"+t._s(s.num))]):t._e(),t._v(" "),1==s.num?e("span",{staticClass:"tl"},[t._v(t._s(s.title))]):t._e(),t._v(" "),e("span",{staticClass:"tc",domProps:{textContent:t._s("-"+s.buy_price)}}),t._v(" "),e("span",{staticClass:"tr"},[e("p",{domProps:{textContent:t._s(s.pay_time[0])}}),t._v(" "),e("p",{domProps:{textContent:t._s(s.pay_time[1])}})])])])})),t._v(" "),e("div",{staticClass:"load",domProps:{textContent:t._s(t.statusText)},on:{click:t.getMore}})])],1),t._v(" "),e("footer",[t._v("  \n    兑换最多保存50条记录\n  ")])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("ul",{staticClass:"type"},[s("li",{staticClass:"tl"},[this._v("礼品名称")]),this._v(" "),s("li",{staticClass:"tc"},[this._v("消耗积分")]),this._v(" "),s("li",{staticClass:"tr"},[this._v("兑换时间")])])}]};var o=e("VU/8")(i,n,!1,function(t){e("kkdL")},null,null);s.default=o.exports},kkdL:function(t,s){}});